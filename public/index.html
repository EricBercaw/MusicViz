<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>MusicViz — Spotify Premium</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="app-header">
    <h1>MusicViz (Premium)</h1>

    <form id="search-form" autocomplete="off">
      <input id="q" name="q" type="search" placeholder="Search songs or artists…" />
      <button type="submit" title="Search">Search</button>
    </form>

    <div class="auth">
      <button id="loginBtn">Login with Spotify</button>
      <span id="userBadge"></span>
    </div>
  </header>

  <main class="app-main">
    <section class="results" id="results"></section>

    <section class="player">
      <div class="now-playing" id="nowPlaying">Login, then pick a track</div>
      <div class="controls">
        <button id="play">Play</button>
        <button id="pause">Pause</button>
      </div>
      <canvas id="viz" width="1024" height="320"></canvas>
      <!-- No <audio> tag: playback is via Web Playback SDK -->
    </section>
  </main>

  <footer class="app-footer">
    <small>
      Uses Spotify Web Playback SDK (Premium required). Audio cannot be routed into Web Audio due to DRM;
      visualization is driven by Spotify Audio Analysis + player position.
    </small>
  </footer>

  <!-- Spotify Web Playback SDK -->
  <script src="https://sdk.scdn.co/spotify-player.js"></script>
  <script src="index.js" type="module"></script>
</body>
</html>
